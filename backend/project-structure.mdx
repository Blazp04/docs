---
title: "Project Structure"
description: "Directory organization, file naming conventions, and module structure for the SkyGuard backend"
---

# Project Structure

This guide outlines the directory organization, file naming conventions, and architectural structure of the SkyGuard backend. Following these guidelines ensures consistency and maintainability across the entire codebase.

## Root Directory Structure

```
skyguard-backend/
â”œâ”€â”€ docs/                    # Mintlify documentation
â”œâ”€â”€ docs_/                   # Internal architecture docs
â”œâ”€â”€ src/                     # Source code
â”œâ”€â”€ dist/                    # Compiled JavaScript (build output)
â”œâ”€â”€ mssql_data/             # SQL Server data (development)
â”œâ”€â”€ scripts/                # Utility scripts
â”œâ”€â”€ .env.example           # Environment variables template
â”œâ”€â”€ package.json           # Project dependencies
â”œâ”€â”€ tsconfig.json          # TypeScript configuration
â”œâ”€â”€ nodemon.json           # Development server configuration
â””â”€â”€ docker-compose.yml     # Docker setup for development
```

## Source Code Structure (`src/`)

```
src/
â”œâ”€â”€ api/                   # API layer
â”‚   â””â”€â”€ v1/               # API version 1
â”‚       â”œâ”€â”€ handlers/     # Request handlers (controllers)
â”‚       â””â”€â”€ routes/       # Route definitions
â”œâ”€â”€ core/                 # Core application logic
â”‚   â”œâ”€â”€ config/          # Configuration files
â”‚   â”œâ”€â”€ database/        # Database layer
â”‚   â”‚   â”œâ”€â”€ migrations/  # Database migrations
â”‚   â”‚   â””â”€â”€ repositories/ # Data access layer
â”‚   â”œâ”€â”€ middleware/      # Custom middleware
â”‚   â”œâ”€â”€ models/          # Data models and DTOs
â”‚   â”‚   â”œâ”€â”€ dto/         # Data Transfer Objects
â”‚   â”‚   â””â”€â”€ entities/    # Database entities
â”‚   â”œâ”€â”€ services/        # Business logic layer
â”‚   â””â”€â”€ utils/           # Utility functions
â”œâ”€â”€ app.ts              # Application setup
â””â”€â”€ server.ts           # Server entry point
```

## ðŸ”„ Layer Architecture

### 1. API Layer (`src/api/v1/`)
**Purpose**: Handle HTTP requests and responses

**Structure**:
- `routes/` - Route definitions with OpenAPI schemas
- `handlers/` - Request processing logic (controllers)

**Responsibilities**:
- Request validation and sanitization
- Response formatting
- Authentication middleware integration
- OpenAPI documentation

### 2. Core Layer (`src/core/`)
**Purpose**: Core business logic and infrastructure

**Subfolders**:
- `services/` - Business logic and orchestration
- `database/` - Data access and persistence
- `middleware/` - Cross-cutting concerns
- `models/` - Data structures and types
- `config/` - Configuration management
- `utils/` - Shared utilities

### 3. Database Layer (`src/core/database/`)
**Purpose**: Data persistence and access

**Structure**:
- `repositories/` - Data access objects
- `migrations/` - Database schema evolution
- `BaseRepository.ts` - Common database operations
- `connection.ts` - Connection pool management

## File Naming Conventions

### General Rules

<Tabs>
  <Tab title="PascalCase">
    Use **PascalCase** for:
    - Class files: `UserService.ts`, `AuthMiddleware.ts`
    - Interface files: `AuthTypes.ts`, `DatabaseTypes.ts`
    - Component files: `BaseRepository.ts`
  </Tab>
  
  <Tab title="camelCase">
    Use **camelCase** for:
    - Function files: `userHandler.ts`, `authHandler.ts`
    - Utility files: `validation.ts`, `encryption.ts`
    - Configuration files: `server.ts`, `database.ts`
  </Tab>
  
  <Tab title="kebab-case">
    Use **kebab-case** for:
    - Migration files: `001_create_users_table.sql`
    - Documentation files: `api-layer.md`
  </Tab>
</Tabs>

### Specific Patterns

| File Type | Pattern | Examples |
|-----------|---------|----------|
| Repository | `{EntityName}Repository.ts` | `UserRepository.ts`, `OrganizationRepository.ts` |
| Service | `{DomainName}Service.ts` | `AuthService.ts`, `UserService.ts` |
| Handler | `{entityName}Handler.ts` | `userHandler.ts`, `authHandler.ts` |
| Route | `{entityName}.ts` | `auth.ts`, `users.ts` |
| Migration | `{number}_{description}.sql` | `001_create_users_table.sql` |

## ðŸŽ¯ Directory Responsibilities

### API Layer Directories

<AccordionGroup>
  <Accordion title="/src/api/v1/routes/">
    **Responsibility**: Define HTTP routes and OpenAPI schemas
    
    **Rules**:
    - One file per resource/entity
    - Include complete OpenAPI documentation
    - Delegate logic to handlers
    - Group related endpoints
  </Accordion>

  <Accordion title="/src/api/v1/handlers/">
    **Responsibility**: Process HTTP requests and responses
    
    **Rules**:
    - Handle request validation
    - Call appropriate services
    - Format responses
    - Handle errors gracefully
  </Accordion>
</AccordionGroup>

### Core Layer Directories

<AccordionGroup>
  <Accordion title="/src/core/services/">
    **Responsibility**: Business logic and workflow orchestration
    
    **Rules**:
    - Stateless operations
    - Coordinate between repositories
    - Implement business rules
    - Handle transactions
  </Accordion>

  <Accordion title="/src/core/database/repositories/">
    **Responsibility**: Data access and persistence
    
    **Rules**:
    - Extend BaseRepository
    - Use parameterized queries
    - Handle database-specific logic
    - Return domain objects
  </Accordion>

  <Accordion title="/src/core/middleware/">
    **Responsibility**: Cross-cutting concerns
    
    **Rules**:
    - Authentication/authorization
    - Logging and monitoring
    - Error handling
    - Request/response transformation
  </Accordion>

  <Accordion title="/src/core/models/">
    **Responsibility**: Data structures and type definitions
    
    **Structure**:
    - `dto/` - API request/response objects
    - `entities/` - Database entity definitions
  </Accordion>
</AccordionGroup>

## ðŸ“‹ File Organization Rules

### Import Organization

```typescript
// 1. External libraries
import { FastifyInstance } from 'fastify';
import bcrypt from 'bcrypt';

// 2. Internal modules (relative imports)
import { UserService } from '../../../core/services/UserService';
import { UserRepository } from '../../../core/database/repositories/UserRepository';

// 3. Types and interfaces
import { User, CreateUserInput } from '../../../core/database/authTypes';
```

### Export Organization

```typescript
// Named exports preferred over default exports
export class UserService { }
export interface User { }
export const userConfig = { };

// Exception: Route modules can use default export
export default userRoutes;
```

## ðŸ”„ Migration Guidelines

### Legacy Structure (being phased out)
- `/src/routes/` â†’ Move to `/src/api/v1/routes/`
- `/src/dto/` â†’ Move to `/src/core/models/dto/`

### Best Practices for New Files
1. **Follow the established patterns** in `/src/api/v1/` and `/src/core/`
2. **Use TypeScript** for all new files
3. **Include proper documentation** and comments
4. **Follow naming conventions** strictly
5. **Organize imports** according to the rules above

## âœ… Checklist for New Files

<Tip>
Use this checklist when creating new files to ensure consistency:
</Tip>

- [ ] File placed in correct directory
- [ ] Naming convention followed
- [ ] Proper TypeScript types used
- [ ] Imports organized correctly
- [ ] Exports follow conventions
- [ ] Documentation included
- [ ] Error handling implemented

## ðŸ“š Examples

### Typical File Structure for a New Feature

```
src/
â”œâ”€â”€ api/v1/
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â””â”€â”€ productHandler.ts
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ products.ts
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ ProductService.ts
â”‚   â”œâ”€â”€ database/repositories/
â”‚   â”‚   â””â”€â”€ ProductRepository.ts
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ dto/
â”‚       â”‚   â””â”€â”€ ProductDto.ts
â”‚       â””â”€â”€ entities/
â”‚           â””â”€â”€ Product.ts
```

This structure ensures clear separation of concerns and follows the established patterns for maintainable code organization.